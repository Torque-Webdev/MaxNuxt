(window.webpackJsonp=window.webpackJsonp||[]).push([[16,13],{563:function(t,e,o){"use strict";o.r(e);o(62),o(12),o(18);var l=o(122),n=o(19),d={components:{mdbBtn:l.mdbBtn,mdbContainer:l.mdbContainer,mdbCol:l.mdbCol,mdbRow:l.mdbRow,mdbModalHeader:l.mdbModalHeader,mdbModalTitle:l.mdbModalTitle,mdbModalBody:l.mdbModalBody,mdbModalFooter:l.mdbModalFooter,mdbModal:l.mdbModal,mdbInput:l.mdbInput},props:{image:{type:Object,default:function(){return{}}}},data:function(){return{msg:{message:"",type:""},existsModal:!1,uploadImage:!1,file:"",img:{content:"",alt:""},type:"",defaultImage:"https://firebasestorage.googleapis.com/v0/b/jhr-developments-c5bba.appspot.com/o/images%2Fimg-placeholder.png?alt=media&token=7d9c5978-d45d-4049-91d9-ceb235823db7"}},computed:{uploadMsg:function(){return this.$store.getters["images/getMsg"]},updatedImage:function(){return this.$store.getters["images/getImage"]},images:function(){return this.$store.getters["images/getImages"]}},methods:{reset:function(){this.file="",this.img={id:"",content:"",alt:""}},headImage:function(){this.uploadImage=!0},checkFile:function(t){var e=this;this.file=t.target.files[0],n.e.where("name","==",this.file.name).get().then((function(t){t.forEach((function(t){t.exists&&(e.existsModal=!0,e.uploadImage=!1,e.img.content=t.data())}))}))},saveFile:function(){var t=this,e={};e.file=this.file,e.alt=this.img.alt,this.$store.dispatch("images/uploadImage",e).then((function(img){t.$emit("update:image",img)})).then((function(){t.uploadImage=!1,t.reset()}))},closeImageUpload:function(){this.uploadImage=!1,this.reset()},confirmUse:function(){this.$emit("update:image",this.img.content),this.existsModal=!1,this.reset()},declineUse:function(){this.existsModal=!1,this.reset()}}},m=o(75),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("mdb-container",{attrs:{fluid:""}},[o("mdb-row",[o("mdb-col",{staticClass:"text-center pt-2",attrs:{col:"12"}},[t.image.url?o("img",{staticClass:"img-fluid",attrs:{src:t.image.url,alt:t.image.alt}}):o("img",{staticClass:"img-fluid",attrs:{src:t.defaultImage,alt:"Placeholder image"}})]),t._v(" "),o("mdb-col",{attrs:{col:"12"}},[o("div",{staticClass:"md-form col-12 p-0 text-center"},[o("mdb-btn",{staticClass:"ml-3",attrs:{color:"primary",inline:""},on:{click:t.headImage}},[t._v("Cover image")])],1)])],1)],1),t._v(" "),o("mdb-modal",{attrs:{size:"md",show:t.existsModal},on:{close:function(e){t.existsModal=!1}}},[o("mdb-modal-header",[o("mdb-modal-title",[t._v("Image exists with that name")])],1),t._v(" "),o("mdb-modal-body",[o("div",{staticClass:"row col-12 col-md-6 col-lg-4 py-3"},[o("p",[t._v("Would you like to use this one ?")])]),t._v(" "),o("img",{staticClass:"img-fluid",attrs:{src:t.img.content.url,alt:t.img.content.alt}})]),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary",size:"sm"},nativeOn:{click:function(e){return t.declineUse.apply(null,arguments)}}},[t._v("No")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary",size:"sm"},on:{click:t.confirmUse}},[t._v("Yes")])],1)],1),t._v(" "),o("mdb-modal",{attrs:{size:"md",show:t.uploadImage},on:{close:t.closeImageUpload}},[o("mdb-modal-header",[o("mdb-modal-title",[t._v("Upload image")])],1),t._v(" "),o("mdb-modal-body",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"md-form"},[o("mdb-input",{attrs:{label:"Description",inline:""},model:{value:t.img.alt,callback:function(e){t.$set(t.img,"alt","string"==typeof e?e.trim():e)},expression:"img.alt"}})],1)]),t._v(" "),o("div",{staticClass:"col-12"},[o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-prepend"},[o("span",{staticClass:"input-group-text",attrs:{id:"imageInput"}},[t._v("Upload")])]),t._v(" "),o("div",{staticClass:"custom-file"},[o("input",{ref:"imageInput",staticClass:"custom-file-input",attrs:{id:"imageInput",type:"file","aria-describedby":"imageInput",accept:"image/jpeg image/png"},on:{change:function(e){return t.checkFile(e)}}}),t._v(" "),t.file.name?o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v(t._s(t.file.name))]):o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v("Image")])])])])])]),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary",size:"sm"},nativeOn:{click:function(e){return t.closeImageUpload.apply(null,arguments)}}},[t._v("Close")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary",size:"sm",disabled:""==t.img.alt},on:{click:function(e){return t.saveFile(t.type)}}},[t._v("Save")])],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[""!=t.uploadMsg.message?o("div",{staticClass:"text-white text-center",class:"bg-"+t.uploadMsg.type},[o("p",[t._v(t._s(t.uploadMsg.message))])]):t._e()])],1)],1)}),[],!1,null,null,null);e.default=component.exports},594:function(t,e,o){"use strict";o.r(e);var l=o(122),n=o(19),d={components:{mdbBtn:l.mdbBtn},data:function(){return{head:""}},computed:{page:function(){return this.$store.getters["posts/getPage"]}},methods:{save:function(){n.h.doc(this.page.id).update({head:this.page.head})}}},m=o(75),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("ui-image-upload",{attrs:{image:t.page.head},on:{"update:image":function(e){return t.$set(t.page,"head",e)}}}),t._v(" "),o("mdb-btn",{attrs:{color:"primary"},on:{click:t.save}},[t._v("Update image")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiImageUpload:o(563).default})}}]);