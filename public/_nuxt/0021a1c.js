(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{673:function(e,t,o){"use strict";o.r(t);o(62),o(12),o(18),o(84);var l=o(122),n=o(19),d={components:{mdbInput:l.mdbInput,mdbBtn:l.mdbBtn,mdbContainer:l.mdbContainer,mdbIcon:l.mdbIcon,mdbModalHeader:l.mdbModalHeader,mdbModalTitle:l.mdbModalTitle,mdbModalBody:l.mdbModalBody,mdbModalFooter:l.mdbModalFooter,mdbModal:l.mdbModal,mdbCol:l.mdbCol,mdbRow:l.mdbRow},data:function(){return{toDeleteItem:{id:"",name:"",alt:"",url:""},deleteModal:!1,uploadvideo:!1,file:"",msg:{message:"",type:""},img:{alt:""}}},computed:{videoList:function(){return this.$store.getters["videos/getVideos"]},uploadMsg:function(){return this.$store.getters["videos/getMsg"]}},methods:{newVideo:function(){this.uploadvideo=!0},checkFile:function(e){var t=this;this.file=e.target.files[0],n.n.where("name","==",this.file.name).get().then((function(e){e.forEach((function(e){if(e.exists){t.$store.commit("videos/setMsg",{type:"warning",message:"Video with this name already exists"}),t.file=""}}))}))},deleteItem:function(e){this.deleteModal=!0,this.toDeleteItem={id:e.id,name:e.name,alt:e.alt,url:e.url}},cancelDelete:function(){this.toDeleteItem={id:"",name:"",alt:"",url:""},this.deleteModal=!1},confirmDelete:function(){var e=this;n.n.doc(this.toDeleteItem.id).delete().then((function(){e.deleteModal=!1,e.msg={type:"danger",message:"Video deleted"},setTimeout((function(){e.msg={type:"",message:""}}),2e3)})).catch((function(t){e.msg={type:"warning",message:t.message},setTimeout((function(){e.msg={type:"",message:""}}),2e3)}))},saveFile:function(){var e=this,t={};t.file=this.file,t.alt=this.img.alt,this.$store.dispatch("videos/uploadVideo",t),setTimeout((function(){e.uploadvideo=!1,e.file="",e.img.alt=""}),2e3)},closeVideoUpload:function(){this.uploadvideo=!1,this.file="",this.img.alt=""}}},c=o(75),component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"container text-center"},[o("mdb-btn",{staticClass:"ml-0",attrs:{color:"primary",inline:""},on:{click:e.newVideo}},[e._v("Add new video")])],1),e._v(" "),o("mdb-container",{staticClass:"p-0 pt-5",attrs:{fluid:""}},[o("mdb-row",e._l(e.videoList,(function(video,t){return o("mdb-col",{key:t,staticClass:"col-4"},[o("video",{staticClass:"video-fluid z-depth-1",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[o("source",{attrs:{src:video.url,type:"video/mp4"}})]),e._v(" "),o("p",[e._v("name: "+e._s(video.name))]),e._v(" "),o("p",[e._v("alt: "+e._s(video.alt))]),e._v(" "),o("div",{staticClass:"text-center"},[o("a",{on:{click:function(t){return e.deleteItem(video)}}},[o("mdb-icon",{attrs:{icon:"trash-alt"}})],1)])])})),1)],1),e._v(" "),o("transition",{attrs:{name:"fade"}},[""!=e.msg.message?o("div",{staticClass:"pl-5 mt-4 text-white text-center",class:"bg-"+e.msg.type},[o("p",[e._v(e._s(e.msg.message))])]):e._e()]),e._v(" "),o("mdb-modal",{attrs:{frame:"",position:"top",direction:"top",show:e.deleteModal},on:{close:function(t){e.deleteModal=!1}}},[o("mdb-modal-body",{staticClass:"text-center"},[o("span",{staticClass:"text-danger"},[e._v("\n        Are you sure you want to delete this video ? ( any documents that use\n        this video will need to be changed )\n      ")]),e._v("\n      "+e._s(e.toDeleteItem.name)+"\n      "),o("mdb-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.cancelDelete.apply(null,arguments)}}},[e._v("Close")]),e._v(" "),o("mdb-btn",{attrs:{color:"secondary"},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1),e._v(" "),o("mdb-modal",{attrs:{size:"md",show:e.uploadvideo},on:{close:e.closeVideoUpload}},[o("mdb-modal-header",[o("mdb-modal-title",[e._v("Upload video")])],1),e._v(" "),o("mdb-modal-body",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"md-form"},[o("mdb-input",{attrs:{label:"Description",inline:""},model:{value:e.img.alt,callback:function(t){e.$set(e.img,"alt","string"==typeof t?t.trim():t)},expression:"img.alt"}})],1)]),e._v(" "),o("div",{staticClass:"col-12"},[o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-prepend"},[o("span",{staticClass:"input-group-text",attrs:{id:"videoInput"}},[e._v("Upload")])]),e._v(" "),o("div",{staticClass:"custom-file"},[o("input",{ref:"videoInput",staticClass:"custom-file-input",attrs:{id:"videoInput",type:"file","aria-describedby":"videoInput",accept:"video/jpeg video/png"},on:{change:function(t){return e.checkFile(t)}}}),e._v(" "),e.file.name?o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[e._v(e._s(e.file.name))]):o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[e._v("Video")])])])])])]),e._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary",size:"sm"},nativeOn:{click:function(t){return e.closeVideoUpload.apply(null,arguments)}}},[e._v("Close")]),e._v(" "),o("mdb-btn",{attrs:{color:"primary",size:"sm",disabled:""==e.img.alt},on:{click:function(t){return e.saveFile(e.type)}}},[e._v("Save")])],1),e._v(" "),o("transition",{attrs:{name:"fade"}},[""!=e.uploadMsg.message?o("div",{staticClass:"text-white text-center",class:"bg-"+e.uploadMsg.type},[o("p",[e._v(e._s(e.uploadMsg.message))])]):e._e()])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);